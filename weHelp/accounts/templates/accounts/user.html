{% extends 'base_layout.html' %}

{% block content %}

<div style="text-align: center; ">
    <h2>:הבקשות שלך</h2>
</div>
<div>
    {% for post in posts %}
    <div class="card text-center"
        style="margin-left: 10%;margin-right: 10%;margin-top: 15px;margin-bottom: 15px; border-radius: 10px; width: 80%; border: 1px solid rgb(30, 172, 253);">
        <div class="card-header">
            {{post.author.name}}
        </div>
        <div class="card-body">
            <p class="card-text">{{post.title}}</p>
            <p class="card-text">{{post.text}}</p>
            <p class="card-text">מיקום: {{post.city}}</p>
            <p class="card-text">צריך סיוע ב{{post.selected_help}}</p>
            <div class="row justify-content-md-center">
                <a href="https://wa.me/" onclick="location.href=this.href+remove_plus('{{post.phone}}'); return false;"
                    class="btn btn-primary col col-lg-2"><i class="fab fa-whatsapp"></i>
                    שלח הודעה</a>
                <p class="col col-lg-2"></p>
                <a href="tel:" onclick="location.href=this.href+change_phone('{{post.phone}}');return false;" class="btn btn-primary col
                                col-lg-2"><i class="fas fa-phone-alt"></i>
                    התקשר</a>
            </div>
        </div>
        <div class="card-footer text-muted">
            {{post.date}} :תאריך פרסום
        </div>
    </div>
    {% endfor %}
</div>
<script>
    function change_phone(x) {
        clean = x.slice(-9);
        newnum = ''.concat('0', clean);
        console.log(newnum);
        return newnum;
    }

    function remove_plus(x) {
        console.log(x);
        k = x.slice(-12);
        console.log(k);
        return k;
    }
</script>

{% endblock %}